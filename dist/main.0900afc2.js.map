{"version":3,"sources":["js/main.js"],"names":["$userSiteList","$","$repositorySiteList","render","window","userSiteList","localStorage","getItem","defaultSiteList","name","link","save","JSON","parse","find","remove","forEach","site","index","addToUserList","on","$repository","hasClass","removeClass","addClass","click","$dialog","console","log","val","simplifyUrl","push","names","Array","from","map","value","links","e","x","target","matches","parentNode","deleteSite","splice","dataset","url","replace","$lastLi","$site","insertBefore","append","setItem","stringify"],"mappings":"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","file":"main.0900afc2.js","sourceRoot":"../src","sourcesContent":["let $userSiteList = $('.userSiteList .siteList')\nlet $repositorySiteList = $('.repository .siteList')\nrender()\n\nfunction render() {\n  window.userSiteList = localStorage.getItem('userSiteList')\n  let defaultSiteList = [\n    { name: 'github', link: 'github.com' },\n    { name: '掘金', link: 'juejin.im' },\n    { name: 'learnku', link: 'learnku.com' },\n    { name: '开源中国', link: 'oschina.net' },\n    { name: 'IBM', link: 'developer.ibm.com' },\n    { name: 'w3c', link: 'w3.org' },\n    { name: 'iconfont', link: 'iconfont.cn' },\n    { name: 'JSBIN', link: 'jsbin.com' },\n  ]\n  if (window.userSiteList === null) {\n    userSiteList = defaultSiteList\n    save()\n  } else {\n    userSiteList = JSON.parse(userSiteList)\n  }\n  $userSiteList.find('.site').remove()\n  $repositorySiteList.find('.site').remove()\n  userSiteList.forEach((site, index) => {\n    addToUserList(site, index)\n  })\n}\n\n$('#repositoryBtn').on('click', () => {\n  let $repository = $('#repository')\n  if ($repository.hasClass('hide')) {\n    $repository.removeClass('hide')\n  } else {\n    $repository.addClass('hide')\n  }\n})\n$('.repository')\n  .find('#cencelBtn')\n  .on('click', () => {\n    $('#repositoryBtn').click()\n  })\n$('#addSite').on('click', () => {\n  let $dialog = $('#dialogAdd')\n  $dialog.removeClass('hide')\n})\nconsole.log($('#addSiteBtn'))\n$('#addSiteBtn').on('click', () => {\n  let site = {\n    name: $('#siteNameInput').val(),\n    link: simplifyUrl($('#siteLinkInput').val()),\n  }\n  userSiteList.push(site)\n  save()\n  render()\n  $('#repositoryBtn').click()\n})\n$('#cancelBtn').on('click', () => {\n  let $dialog = $('.dialog')\n  $dialog.addClass('hide')\n})\n$('.saveBtn').on('click', () => {\n  let names = Array.from($(`.repository .siteList input[name='name']`)).map(\n    (name) => {\n      return name.value\n    }\n  )\n  let links = Array.from($(`.repository .siteList input[name='link']`)).map(\n    (link) => {\n      return simplifyUrl(link.value)\n    }\n  )\n  userSiteList = []\n  names.forEach((name, index) => {\n    userSiteList.push({\n      name,\n      link: links[index],\n    })\n  })\n  save()\n  render()\n  $('#repositoryBtn').click()\n})\n$('.siteList').on('click', (e) => {\n  let x = e.target\n  while (x.matches('.icon') === false) {\n    if (x.matches('.siteList')) {\n      x = null\n      break\n    }\n    x = x.parentNode\n  }\n  x && deleteSite(x)\n})\n\nfunction deleteSite(e) {\n  userSiteList.splice(e.dataset.index, 1)\n  save()\n  render()\n  $('#repositoryBtn').click()\n}\nfunction simplifyUrl(url) {\n  return url.replace('https://', '').replace('http://', '').replace(/\\/.*/, '')\n}\nfunction addToUserList(site, index) {\n  let $lastLi = $userSiteList.find('li.last')\n  let $site = $(`<li class=\"site\">\n          <a href=\"${site.link}\">\n            <img class=\"logo\" src=\"//${site.link}/favicon.ico\" alt=\"${site.name[0]}\"></img>\n            <div class=\"name\">${site.name}</div>\n          </a>\n        </li>`)\n  $site.insertBefore($lastLi)\n  site = $(`\n            <div class=\"site\" >\n              <img class=\"logo\" src=\"//${site.link}/favicon.ico\" alt=\"${site.name[0]}\"></img>\n              <input type=\"text\" value=\"${site.name}\" name=\"name\">\n              <input type=\"text\" value=\"${site.link}\" name=\"link\">\n              \n              <svg class=\"icon icon-delete\" aria-hidden=\"true\" data-index=\"${index}\">\n                  <use xlink:href=\"#icon-delete\"></use>\n              </svg>\n            </div>`)\n  $repositorySiteList.append(site)\n}\nfunction save() {\n  localStorage.setItem('userSiteList', JSON.stringify(userSiteList))\n}\n"]}